(function(){const a=document.querySelector.bind(document),l=document.querySelectorAll.bind(document);let t=a('form[action="/cart/add"]'),u=t.querySelector('select[name="id"]'),c=t.querySelector(".add-to-cart-btn"),m=t.querySelector(".sold-out-btn"),s=t.querySelector(".error-msg"),p=Array.from(t.querySelectorAll(".variant-selector")).map(e=>e.dataset.optionName);t.addEventListener("change",b);function b(){let e=new FormData(t);p.forEach(r=>{let o=t.querySelector(`[data-option-preview="${r}"]`);o&&(o.innerHTML=e.get(r))});let n=p.map(r=>e.get(r)).join` / `,i=Array.from(u.options).find(r=>r.text.includes(n));if(i){c.removeAttribute("disabled"),s.setAttribute("hidden",!0),u.value=i.value;let{selectedPrice:r,selectedCompareAtPrice:o,selectedAvailable:T}=i.dataset;t.querySelector("[data-price]").innerHTML=v(r),t.querySelector("[data-compare-at-price]")&&(t.querySelector("[data-compare-at-price]").innerHTML=v(o)),T==="true"?(c.removeAttribute("hidden"),m.setAttribute("hidden",!0)):(c.setAttribute("hidden",!0),m.removeAttribute("hidden"));let S=new URLSearchParams(window.location.search);S.set("variant",i.value),window.history.replaceState({},"",`?${S.toString()}`)}else c.setAttribute("disabled",!0),s.removeAttribute("hidden"),s.innerHTML="This configuration does not exist"}b();function v(e){const{format:n}=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`$${n(e/100)}`}const y=(e,n)=>{!e[0].isIntersecting||(n.unobserve(d),fetch(d.dataset.url).then(i=>i.text()).then(i=>{const r=document.createElement("div");r.innerHTML=i;const o=r.querySelector(".product-recommendations");o&&o.innerHTML.trim().length&&(d.innerHTML=o.innerHTML)}).catch(console.error))},d=a(".product-recommendations");new IntersectionObserver(y,{rootMargin:"0px 0px 200px 0px"}).observe(d);const A=l('input[name="pdp-tabs"]'),f=l(".pdp-tab-item");function h(){f?.forEach(n=>{n.classList.remove("is-active")});const e=a('input[name="pdp-tabs"]:checked');a(`.pdp-tab-item[for="${e?.id}"]`)?.classList.add("is-active")}h(),A?.forEach(e=>{e.addEventListener("change",h)}),f?.forEach(e=>{if(e.innerText.includes("Dimensions")){let n=a(".link-to-sizes");n?.removeAttribute("hidden"),n?.addEventListener("click",()=>{a('.pdp-tab-item[for="pdp-tab-2"]')?.click()})}})})();
