(function(){const c=document.querySelector.bind(document),l=document.querySelectorAll.bind(document);let r=c('form[action="/cart/add"]'),u=r.querySelector('select[name="id"]'),m=["size","color"],a=r.querySelector(".add-to-cart-btn"),p=r.querySelector(".sold-out-btn"),s=r.querySelector(".error-msg");r.addEventListener("change",b);function b(){let e=new FormData(r);m.forEach(t=>{let o=r.querySelector(`[data-option-preview="${t}"]`);o&&(o.innerHTML=e.get(t))});let n=m.map(t=>e.get(t)).join` / `,i=Array.from(u.options).find(t=>t.text.includes(n));if(i){a.removeAttribute("disabled"),s.setAttribute("hidden",!0),u.value=i.value;let{selectedPrice:t,selectedCompareAtPrice:o,selectedAvailable:A}=i.dataset;r.querySelector("[data-price]").innerHTML=f(t),r.querySelector("[data-compare-at-price]")&&(r.querySelector("[data-compare-at-price]").innerHTML=f(o)),A==="true"?(a.removeAttribute("hidden"),p.setAttribute("hidden",!0)):(a.setAttribute("hidden",!0),p.removeAttribute("hidden")),window.history.replaceState(null,null,`?variant=${i.value}`)}else S("This configuration does not exist")}b();function S(e){a.setAttribute("disabled",!0),s.removeAttribute("hidden"),s.innerHTML=e}function f(e){const{format:n}=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`$${n(e/100)}`}const T=(e,n)=>{!e[0].isIntersecting||(n.unobserve(d),fetch(d.dataset.url).then(i=>i.text()).then(i=>{const t=document.createElement("div");t.innerHTML=i;const o=t.querySelector(".product-recommendations");o&&o.innerHTML.trim().length&&(d.innerHTML=o.innerHTML)}).catch(console.error))},d=c(".product-recommendations");new IntersectionObserver(T,{rootMargin:"0px 0px 200px 0px"}).observe(d);const y=l('input[name="pdp-tabs"]'),v=l(".pdp-tab-item");function h(){v?.forEach(n=>{n.classList.remove("is-active")});const e=c('input[name="pdp-tabs"]:checked');c(`.pdp-tab-item[for="${e?.id}"]`)?.classList.add("is-active")}h(),y?.forEach(e=>{e.addEventListener("change",h)}),v?.forEach(e=>{if(e.innerText.includes("Dimensions")){let n=c(".link-to-sizes");n?.removeAttribute("hidden"),n?.addEventListener("click",()=>{c('.pdp-tab-item[for="pdp-tab-2"]')?.click()})}})})();
