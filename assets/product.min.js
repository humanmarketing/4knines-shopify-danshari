(function(){let e=document.querySelector('form[action="/cart/add"]'),l=e.querySelector('select[name="id"]'),s=["size","color"];e.addEventListener("change",()=>{let r=new FormData(e);s.forEach(n=>{let d=e.querySelector(`[data-option-preview="${n}"]`);d&&(d.innerHTML=r.get(n))});let o=s.map(n=>r.get(n)).join` / `,t=Array.from(l.options).find(n=>n.text.includes(o));l.value=t.value;let{selectedPrice:i,selectedCompareAtPrice:a}=t.dataset;e.querySelector("[data-price]").innerHTML=m(i),e.querySelector("[data-compare-at-price]")&&(e.querySelector("[data-compare-at-price]").innerHTML=m(a)),window.history.replaceState(null,null,`?variant=${t.value}`)});function m(r){const{format:o}=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`$${o(r/100)}`}const u=(r,o)=>{!r[0].isIntersecting||(o.unobserve(c),fetch(c.dataset.url).then(t=>t.text()).then(t=>{const i=document.createElement("div");i.innerHTML=t;const a=i.querySelector(".product-recommendations");a&&a.innerHTML.trim().length&&(c.innerHTML=a.innerHTML)}).catch(console.error))},c=document.querySelector(".product-recommendations");new IntersectionObserver(u,{rootMargin:"0px 0px 200px 0px"}).observe(c)})();
