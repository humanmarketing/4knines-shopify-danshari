(function(){let o=document.querySelector('form[action="/cart/add"]'),a=o.querySelector('select[name="id"]');o.addEventListener("change",()=>{let n=new FormData(o),c=[n.get("size"),n.get("color")].join` / `,e=Array.from(a.options).find(r=>r.text.includes(c));a.value=e.value});const s=(n,c)=>{!n[0].isIntersecting||(c.unobserve(t),fetch(t.dataset.url).then(e=>e.text()).then(e=>{const r=document.createElement("div");r.innerHTML=e;const i=r.querySelector(".product-recommendations");i&&i.innerHTML.trim().length&&(t.innerHTML=i.innerHTML)}).catch(console.error))},t=document.querySelector(".product-recommendations");new IntersectionObserver(s,{rootMargin:"0px 0px 200px 0px"}).observe(t)})();
